# SA指标计算方法与定义

---
**SA定义英文原文（Schedule Adherence）**
Schedule Adherence is a metric revealing whether or not production is adhering to the scheduled operating plan. The metric is defined as a percentage of output over demand. Schedule Adherence plays an important role in production performance.

**中文解读**
Schedule Adherence（计划达成率）是衡量生产是否按照既定生产计划执行的重要指标。该指标通常以"产出/需求"的百分比来表示，反映了生产实际完成情况与计划之间的吻合程度。计划达成率在生产绩效中起着重要作用。
---

## 1. 数据源概述

### 1.1 主要数据源
SA指标计算基于以下核心数据源：

#### 1.1.1 SFC批次报工记录（e4_批次报工记录_SFC.pq）
- **数据来源**：SharePoint 30-MES导出数据/publish文件夹下的`SFC_处理后数据_latest.parquet`
- **更新频率**：通过ETL脚本（etl_sfc.py）处理SFC原始Excel文件后生成
- **主要用途**：提供工序Check In时间、报工记录，用于计算实际Lead Time和Process Time
- **处理方式**：从SharePoint 70-SFC文件夹下的LC-开头的Excel文件读取，经过清洗、去重、计算后保存为Parquet格式

#### 1.1.2 MES批次报工记录（e2_批次报工记录_MES.pq）
- **数据来源**：SharePoint 30-MES导出数据/publish文件夹下的`MES_处理后数据_latest.parquet`
- **更新频率**：通过ETL脚本（etl_sa.py）处理MES原始Excel文件后生成
- **主要用途**：核心生产数据，包含工序报工、时间记录、数量信息等，所有计算字段已在ETL中完成
- **处理方式**：从SharePoint 30-MES文件夹下的Product Output开头的Excel文件读取，经过清洗、匹配SFC数据、匹配标准时间、计算后保存为Parquet格式

#### 1.1.3 产品标准时间（e3_产品标准时间.pq）
- **数据来源**：SharePoint 30-MES导出数据/publish文件夹下的`SAP_Routing_yyyymmdd.parquet`（自动查找最新文件）
- **更新频率**：通过ETL脚本（convert_standard_time.py）合并Routing和机加工清单后生成
- **主要用途**：提供标准加工时间（EH_machine(s)、EH_labor(s)）、OEE、Setup Time (h) 等计划参数
- **处理方式**：从Routing表（Machine、Labor时间，单位：秒）和机加工清单表（OEE、调试时间）合并生成

### 1.2 数据关联关系
```
SFC原始数据 → ETL处理 → SFC处理后数据（Parquet）
                                    ↓
MES原始数据 → ETL处理 → MES处理后数据（Parquet）← 合并SFC的Checkin_SFC
                                    ↓
标准时间表 → ETL合并 → SAP_Routing（Parquet）← 匹配标准时间参数
                                    ↓
                            Power BI读取Parquet
```

## 2. 核心字段定义

### 2.1 基础标识字段

| 字段名 | 英文名 | 数据类型 | 说明 | 数据来源 |
|--------|--------|----------|------|----------|
| 批次号 | BatchNumber | Text | 生产批次唯一标识 | MES/SFC |
| 产品号 | CFN | Text | 产品编码 | MES/SFC |
| 生产订单 | ProductionOrder | Int64 | 生产订单号（整数格式） | MES |
| 工序号 | Operation | Text | 4位工序代码，自动补零 | MES/SFC |
| 工序名称 | Operation description | Text | 标准化后的工序名称 | MES/SFC |
| 工艺路线 | Group | Text | 产品工艺路线分组（提取数字部分） | MES |
| 机台号 | machine | Int64/Text | 生产设备编号（MES为文本，SFC为整数） | MES/SFC |
| 生产区域 | ProductionArea | Text | 生产区域名称 | MES |
| 产品类型 | ProductType | Text | 产品类型分类 | SFC |
| 报工人 | TrackOut_User | Text | 报工人员姓名 | SFC |
| Check In人员 | CheckIn_User | Text | Check In人员姓名 | SFC |
| VSM | VSM | Text | 生产主管 | MES |
| ERP代码 | ERPCode | Text | ERP系统代码 | MES |
| 产品描述 | Product_Description | Text | 产品描述信息 | MES |

### 2.2 时间相关字段

| 字段名 | 英文名 | 数据类型 | 说明 | 数据来源 |
|--------|--------|----------|------|----------|
| 进入工序时间 | EnterStepTime | DateTime | 批次进入工序的时间 | MES/SFC |
| 工序投入时间 | TrackInTime | DateTime | 工序开始加工的时间 | MES |
| SFC Check In时间 | Checkin_SFC | DateTime | SFC系统的Check In时间 | SFC（合并到MES） |
| 工序报工时间 | TrackOutTime | DateTime | 工序完成报工的时间 | MES/SFC |
| 报工日期 | TrackOutDate | Date | 工序报工时间的日期部分 | MES（计算得出） |
| 应完工时间 | DueTime | DateTime | 基于计划计算的应完工时间（考虑周末） | 计算得出 |
| 上批结束时间 | PreviousBatchEndTime | DateTime | 同一机台上一批次的结束时间（空值保存为null） | MES/SFC（计算得出） |

### 2.3 数量相关字段

| 字段名 | 英文名 | 数据类型 | 说明 | 数据来源 |
|--------|--------|----------|------|----------|
| 工序投入数量 | StepInQuantity | Int64 | 进入工序的物料数量 | MES |
| 工序产出数量 | TrackOutQuantity | Int64 | 工序完成后的产出数量 | MES/SFC |
| 报废数量 | ScrapQuantity | Int64 | 工序报废的物料数量 | SFC |

### 2.4 标准时间参数字段

| 字段名 | 英文名 | 数据类型 | 说明 | 数据来源 |
|--------|--------|----------|------|----------|
| 单件机器时间 | EH_machine(s) | Number | 单件机器加工时间（秒） | 标准时间表（Machine/Quantity） |
| 单件人工时间 | EH_labor(s) | Number | 单件人工操作时间（秒） | 标准时间表（Labor/Quantity） |
| 设备综合效率 | OEE | Number | 设备综合效率（0-1之间；空值或0按0.77处理） | 标准时间表 |
| 调试时间 | Setup Time (h) | Number | 设备调试时间（小时） | 标准时间表 |
| 是否调试 | Setup | Text | 是否需要进行调试（Yes/No） | MES（计算得出） |

### 2.5 计算字段

| 字段名 | 英文名 | 数据类型 | 说明 | 计算公式 |
|--------|--------|----------|------|----------|
| Lead Time (天) | LT(d) | Number | 工序实际Lead Time | 见3.1（MES和SFC均不扣除周末） |
| Process Time (天) | PT(d) | Number | 工序实际加工时间 | 见3.2（MES和SFC均不扣除周末） |
| 标准时间 (天) | ST(d) | Number | 理论标准加工时间（天，不考虑周末） | 见3.3 |
| 应完工时间 | DueTime | DateTime | 基于计划计算的应完工时间（考虑周末） | 见3.4 |
| 周末扣除天数 | Weekend(d) | Number | TrackIn到应完工之间剔除的周末天数（单位：天） | 见3.4 |
| 完工状态 | CompletionStatus | Text | 是否按期完工（不含容差） | 见3.5 |
| 容差小时数 | Tolerance(h) | Number | 固定容差时间（8小时） | 固定值8.0 |
| 设备编号（数字） | Machine(#) | Number | 从machine字段提取的数字部分 | 从machine字段提取 |

## 3. 核心计算逻辑

### 3.1 Lead Time (LT) 计算

#### 3.1.1 MES数据 - LT计算（不扣除周末）
```
0010工序：LT(d) = (TrackOutTime - 开始时间) / 24
非0010工序：LT(d) = (TrackOutTime - EnterStepTime) / 24

0010工序的开始时间选择优先级：
1. Checkin_SFC（从SFC数据合并）
2. EnterStepTime（进入工序时间，备用）
3. TrackInTime（工序投入时间，备用）
```
- **适用条件**：
  - Operation = "0010"：优先使用Checkin_SFC（从SFC数据合并），如果为空则使用EnterStepTime，再为空则使用TrackInTime
  - Operation ≠ "0010"：使用EnterStepTime作为起始时间
- **计算逻辑**：直接计算时间差，不扣除周末
- **单位**：天，保留2位小数
- **空值处理**：如果所有备用时间都为空，返回null

#### 3.1.2 SFC数据 - LT计算（不扣除周末）
```
0010工序：LT(d) = (TrackOutTime - Checkin_SFC) / 24
非0010工序：LT(d) = (TrackOutTime - EnterStepTime) / 24
```
- **适用条件**：
  - Operation = "0010"：使用Checkin_SFC作为起始时间
  - Operation ≠ "0010"：使用EnterStepTime作为起始时间
- **计算逻辑**：直接计算时间差，不扣除周末
- **单位**：天，保留2位小数
- **空值处理**：如果开始时间为空，返回null

### 3.2 Process Time (PT) 计算

#### 3.2.1 MES数据 - PT计算（不扣除周末）
```
PT(d) = (TrackOutTime - 开始时间) / 24
开始时间 = IF(Checkin_SFC 不为空, Checkin_SFC, TrackInTime)
```
- **计算逻辑**：优先使用Checkin_SFC（从SFC数据合并），否则使用TrackInTime；不扣除周末
- **单位**：天，保留2位小数
- **空值处理**：如果开始时间为空，返回null

#### 3.2.2 SFC数据 - PT计算（不扣除周末）
```
PT(d) = (TrackOutTime - Checkin_SFC) / 24
```
- **计算逻辑**：统一使用Checkin_SFC作为起始时间，不扣除周末
- **单位**：天，保留2位小数
- **空值处理**：如果Checkin_SFC为空，返回null

### 3.3 标准时间 ST(d) 计算

#### 3.3.1 MES数据 - ST计算
```
单件时间(秒) = IF(EH_machine(s) 不为空且不为0, EH_machine(s), EH_labor(s))
单件时间(小时) = 单件时间(秒) / 3600
OEE = IF(OEE 为空或为0, 0.77, OEE)
调试时间 = IF(Setup = "Yes", Setup Time (h), 0)
ST(d) = ROUND( (调试时间 + StepInQuantity × 单件时间(小时) / OEE) / 24, 2 )
```
- **数量字段**：使用StepInQuantity（工序投入数量）
- **单位**：小时换算为天，保留2位小数
- **注意**：ST是理论时间，不考虑周末

#### 3.3.2 SFC数据 - ST计算
```
单件时间(秒) = IF(EH_machine(s) 不为空且不为0, EH_machine(s), EH_labor(s))
单件时间(小时) = 单件时间(秒) / 3600
OEE = IF(OEE 为空或为0, 0.77, OEE)
调试时间 = IF(Setup = "Yes", Setup Time (h), 0)
数量 = TrackOutQuantity + ScrapQuantity
ST(d) = ROUND( (调试时间 + 数量 × 单件时间(小时) / OEE + 0.5小时换批时间) / 24, 2 )
```
- **数量字段**：使用TrackOutQuantity + ScrapQuantity（合格数量+报废数量）
- **换批时间**：固定增加0.5小时
- **单位**：小时换算为天，保留2位小数
- **注意**：ST是理论时间，不考虑周末

### 3.4 应完工时间 (DueTime) 和周末扣除天数 (Weekend(d)) 计算

#### 3.4.1 MES数据 - DueTime计算（基于工作日日历表）

**核心算法**：按工作日逐天累加工作时间，跳过非工作日（包括周末和法定节假日），直到累加的工作时间达到理论工时。

```
单件时间(秒) = IF(EH_machine(s) 不为空且不为0, EH_machine(s), EH_labor(s))
单件时间(小时) = 单件时间(秒) / 3600
OEE = IF(OEE 为空或为0, 0.77, OEE)
调试时间 = IF(Setup = "Yes", Setup Time (h), 0)
计划小时数 = 调试时间 + StepInQuantity × 单件时间(小时) / OEE + 0.5小时（换批时间）

算法步骤：
1. 从TrackInTime开始
2. 逐天检查是否为工作日（基于日历表）
3. 工作日：累加工作时间（默认8小时/天）
4. 非工作日：跳过（包括周末和法定节假日）
5. 当累加时间达到计划小时数时，返回完成时间
```

- **工作日判断**：基于日历表（`日历工作日表.csv`）的"是否工作日"字段
- **每日工作时间**：可配置（默认8小时/天）
- **非工作日**：包括周末和法定节假日（如10月1-7日国庆节）
- **Weekend(d)计算**：统计从TrackInTime到DueTime之间的非工作日小时数，转换为天数
- **Weekend(d)单位**：天（保留2位小数）
- **换批时间**：固定 +0.5小时

#### 3.4.2 SFC数据 - DueTime计算（基于工作日日历表）

**核心算法**：与MES数据相同，按工作日逐天累加工作时间，跳过非工作日。

```
单件时间(秒) = IF(EH_machine(s) 不为空且不为0, EH_machine(s), EH_labor(s))
单件时间(小时) = 单件时间(秒) / 3600
OEE = IF(OEE 为空或为0, 0.77, OEE)
调试时间 = IF(Setup = "Yes", Setup Time (h), 0)
数量 = TrackOutQuantity + ScrapQuantity
计划小时数 = 调试时间 + 数量 × 单件时间(小时) / OEE + 0.5小时（换批时间）
开始时间 = IF(TrackInTime 不为空, TrackInTime, Checkin_SFC)

算法步骤：
1. 从开始时间开始
2. 逐天检查是否为工作日（基于日历表）
3. 工作日：累加工作时间（默认8小时/天）
4. 非工作日：跳过（包括周末和法定节假日）
5. 当累加时间达到计划小时数时，返回完成时间
```

- **工作日判断**：基于日历表（`日历工作日表.csv`）的"是否工作日"字段
- **每日工作时间**：可配置（默认8小时/天）
- **非工作日**：包括周末和法定节假日
- **Weekend(d)计算**：统计从开始时间到DueTime之间的非工作日小时数，转换为天数
- **Weekend(d)单位**：天（保留2位小数）
- **换批时间**：固定 +0.5小时

### 3.5 完工状态判断
```
CompletionStatus = 
IF(DueTime = null OR TrackOutTime = null, null,
IF(TrackOutTime <= DueTime, "OnTime", "Overdue"))
```
- **OnTime**：实际完工时间 ≤ 应完工时间
- **Overdue**：实际完工时间 > 应完工时间
- **注意**：不考虑容差（Tolerance(h)），直接比较时间

### 3.6 容差小时数 (Tolerance(h)) 计算
```
Tolerance(h) = 8.0
```
- **固定值**：8小时
- **用途**：作为单独字段保存，可用于后续分析，但不参与CompletionStatus判断

### 3.7 上批结束时间 (PreviousBatchEndTime) 计算
```
按 machine 分组
按 TrackOutTime 升序排序（最早的在前）
PreviousBatchEndTime = 上一批次的 TrackOutTime（使用 shift(1)）
第一批次：PreviousBatchEndTime = EnterStepTime
```
- **适用数据**：MES和SFC数据
- **计算逻辑**：按机台分组，按报工时间排序，获取上一批次的结束时间
- **用途**：用于分析同一机台多批次产品的加工顺序
- **空值处理**：如果machine或TrackOutTime为空，PreviousBatchEndTime为null
- **数据类型**：datetime类型，空值保存为null（不是NaT）

### 3.8 计算案例

#### 3.8.1 标准时间与理论完成时间计算案例

**案例背景**：计算一批产品的理论完成时间

**已知条件**：
- 产品数量：108件
- 开始时间：2025年4月27日 6:49:30
- 单件时间：1.05小时
- 调试时间：0小时（不需要调试）
- OEE：80%

**计算过程**：

1. **计算标准时间（小时）**
   ```
   EffectiveTime(h) = 1.05（假设Machine有效）
   OEE = 0.8
   标准加工小时 = 108 × 1.05 ÷ 0.8 = 141.75 小时
   ```

2. **转换为天数和小时 (ST(d))**
   ```
   141.75小时 = 141小时 + 0.75小时
   141.75小时 = 5天 + 21小时 + 45分钟
   ST(d) = ROUND(141.75 / 24, 2)
   ```

3. **计算理论完成时间（未考虑周末，仅示例）**
   ```
   开始时间：2025年4月27日 6:49:30
   加上：5天 21小时 45分钟
   理论完成时间：2025年5月3日 4:34:30
   ```

**详细时间计算**：
- 4月27日 6:49:30 + 21小时 = 4月28日 3:49:30
- 4月28日 3:49:30 + 45分钟 = 4月28日 4:34:30
- 4月28日 4:34:30 + 5天 = 5月3日 4:34:30

**验证**：
此计算逻辑与PQ中 ST(d) 计算一致。

**结果**：理论完成时间 = 2025年5月3日 4:34:30


#### 3.8.2 考虑节假日因素的理论完成时间计算案例（新算法）

**案例背景**：使用新的工作日累加算法，考虑节假日放假因素计算理论完成时间

**已知条件**：
- 产品数量：108件
- 开始时间：2024年9月30日 10:00:00
- 单件时间：1.05小时
- 调试时间：0小时（不需要调试）
- OEE：80%
- 每日工作时间：8小时
- 换批时间：0.5小时
- **节假日：10月1日-7日（国庆节，非工作日）**

**计算过程**：

1. **计算理论工时**
   ```
   单件时间 = 1.05小时
   计划小时数 = 调试时间 + (数量 × 单件时间 / OEE) + 换批时间
   计划小时数 = 0 + (108 × 1.05 / 0.8) + 0.5
   计划小时数 = 0 + 141.75 + 0.5 = 142.25小时
   ```

2. **按工作日逐天累加工作时间**
   ```
   开始时间：2024年9月30日 10:00:00
   剩余工时：142.25小时
   
   第1天（9月30日，周一，工作日）：
   - 当天剩余工作时间：从10:00到18:00 = 8小时
   - 使用工时：8小时
   - 剩余工时：142.25 - 8 = 134.25小时
   - 移动到：10月1日 8:00
   
   第2-8天（10月1-7日，国庆假期，非工作日）：
   - 跳过所有非工作日
   - 移动到：10月8日 8:00
   
   第9天（10月8日，周二，工作日）：
   - 可用工作时间：8小时
   - 使用工时：8小时
   - 剩余工时：134.25 - 8 = 126.25小时
   - 移动到：10月9日 8:00
   
   第10天（10月9日，周三，工作日）：
   - 可用工作时间：8小时
   - 使用工时：8小时
   - 剩余工时：126.25 - 8 = 118.25小时
   - 移动到：10月10日 8:00
   
   ...（继续累加，直到剩余工时 ≤ 8小时）
   
   第18天（10月17日，周四，工作日）：
   - 剩余工时：6.25小时
   - 完成时间：10月17日 8:00 + 6.25小时 = 10月17日 14:15:00
   ```

3. **算法验证**
   ```
   工作日数量 = 142.25小时 ÷ 8小时/天 = 17.78天
   实际工作日 = 18天（包含部分第18天）
   完成时间 = 2024年10月17日 14:15:00
   ```

4. **Weekend(d)计算**
   ```
   从9月30日10:00到10月17日14:15之间的非工作日：
   - 10月1-7日（7天国庆假期）
   - 10月12-13日（周末，2天）
   - 非工作日总天数 = 9天
   Weekend(d) = 9.0天
   ```

**结果**：
- **理论完成时间**：2024年10月17日 14:15:00
- **Weekend(d)**：9.0天（包含7天国庆假期和2天周末）
- **工作日数量**：约18个工作日

**算法优势**：
- **直观性**：直接模拟生产过程，工作日工作，非工作日休息
- **准确性**：自动考虑所有法定节假日和调休安排
- **灵活性**：支持配置每日工作时间（8小时、12小时等）
- **可验证性**：计算过程清晰，易于理解和验证

**实际应用意义**：
- 生产计划制定时必须考虑节假日安排
- 节假日期间不安排生产，自动跳过
- 为生产调度和客户交付提供准确的时间预期
- 算法更符合实际生产场景

## 4. 工序名称标准化

系统自动将原始工序名称标准化为以下标准工序：

| 标准工序名 | 匹配规则 | 说明 |
|------------|----------|------|
| 数控铣 | 以"数控铣"开头 | 数控铣削加工 |
| 锯 | 包含"锯"或"下料" | 锯切下料 |
| 镀铬 | 包含"镀铬" | 表面镀铬处理 |
| 纵切 | 以"纵切"开头 | 纵向切割 |
| 数控车 | 以"数控车"开头 | 数控车削加工 |
| 线切割 | 以"线切割"开头 | 线切割加工 |
| 氩弧焊 | 以"氩弧焊"开头 | 氩弧焊接 |
| 打标 | 包含"打标" | 产品标识 |
| 深孔钻 | 以"深孔"开头 | 深孔钻削 |
| 激光焊 | 以"激光焊"开头 | 激光焊接 |
| 钳工 | 以"钳工"开头 | 钳工装配 |
| 车削 | 以"车削"开头 | 普通车削 |
| 装配 | 以"装配"开头 | 产品装配 |
| 真空热处理 | 以"真空"开头 | 真空热处理 |
| 热处理 | 以"热处理"或"非真空热处理"开头 | 普通热处理 |

## 5. SA指标计算方法

### 5.1 批次级SA计算

#### 5.1.1 单个批次SA判断
```
SA状态 = IF(CompletionStatus = "OnTime", 1, 0)
```
- **按期完工**：SA状态 = 1
- **逾期完工**：SA状态 = 0

#### 5.1.2 时间范围SA统计
```
SA达成率 = COUNT(SA状态 = 1) / COUNT(总批次数)
```

### 5.2 多维度SA分析

#### 5.2.1 按工序统计
```
工序SA = COUNT(工序内按期批次数) / COUNT(工序内总批次数)
```

#### 5.2.2 按设备统计
```
设备SA = COUNT(设备内按期批次数) / COUNT(设备内总批次数)
```

#### 5.2.3 按产品统计
```
产品SA = COUNT(产品内按期批次数) / COUNT(产品内总批次数)
```

#### 5.2.4 按时间统计
```
时间SA = COUNT(时间段内按期批次数) / COUNT(时间段内总批次数)
```

## 6. 数据质量保证

### 6.1 数据清洗规则

#### 6.1.1 工序号标准化
- 去除前后空格
- 转换为数字后补零至4位
- 转换失败设为null

#### 6.1.2 时间字段处理
- "N/A"、空字符串替换为null
- 统一转换为DateTime类型
- 异常值处理

#### 6.1.3 数量字段验证
- 负数检查
- 异常大值检查
- 数据类型转换

### 6.2 数据完整性检查

#### 6.2.1 必填字段验证
- BatchNumber：批次号不能为空
- CFN：产品号不能为空
- Operation：工序号不能为空
- TrackOutTime：报工时间不能为空

#### 6.2.2 关联性验证
- SFC与MES数据匹配率
- 标准时间参数覆盖率
- 时间逻辑一致性

## 7. Power BI应用建议

### 7.1 数据模型设计

#### 7.1.1 事实表
- **生产记录事实表**：包含所有计算字段和度量值
- **时间维度表**：年、季度、月、周、日等时间层级
- **产品维度表**：产品分类、工艺路线等
- **工序维度表**：工序分类、标准时间等
- **设备维度表**：设备分类、生产区域等

#### 7.1.2 关键度量值

```dax
// SA达成率
SA达成率 = 
DIVIDE(
    COUNTROWS(FILTER('生产记录', [CompletionStatus] = "OnTime")),
    COUNTROWS('生产记录'),
    0
)

// 按期批次数
按期批次数 = 
COUNTROWS(FILTER('生产记录', [CompletionStatus] = "OnTime"))

// 逾期批次数
逾期批次数 = 
COUNTROWS(FILTER('生产记录', [CompletionStatus] = "Overdue"))

// 平均Lead Time
平均LeadTime = 
AVERAGE('生产记录'[LT(d)])

// 平均Process Time
平均ProcessTime = 
AVERAGE('生产记录'[PT(d)])

// 总批次数
总批次数 = 
COUNTROWS('生产记录')
```

### 7.2 可视化建议

#### 7.2.1 核心指标卡片
- SA达成率（大数字显示）
- 按期批次数/总批次数
- 平均Lead Time
- 平均Process Time

#### 7.2.2 趋势分析图表
- SA达成率时间趋势线图
- 按期/逾期批次堆叠柱状图
- Lead Time分布直方图

#### 7.2.3 多维度分析
- 按工序的SA达成率对比
- 按设备的SA达成率对比
- 按产品的SA达成率对比

## 8. 注意事项与限制

### 8.1 数据时效性
- SFC数据更新可能存在延迟
- MES数据实时性较好
- 标准时间参数更新频率较低

### 8.2 计算精度
- 时间计算精确到分钟
- 数量计算精确到整数
- 百分比保留2位小数

### 8.3 异常情况处理
- 数据缺失时的默认值设置
- 异常时间值的过滤规则
- 极端数量值的处理方式

### 8.4 性能优化
- 大数据量时的查询优化
- 实时计算的性能考虑
- 历史数据的归档策略