# SA数据清洗文件夹结构说明

## 📁 目录结构

```
13-SA数据清洗/
├── 01_核心ETL程序/          # 主要的ETL处理程序
├── 02_测试验证脚本/          # 测试和验证脚本
├── 03_配置文件/              # 配置文件和依赖
├── 04_报告文档/              # 各类报告和文档
├── 05_数据文件/              # 数据文件和结果
├── 06_日志文件/              # 运行日志
├── 07_工具脚本/              # 辅助工具和批处理
├── 08_临时文件/              # 临时文件和缓存
└── 文件夹结构说明.md         # 本说明文档
```

## 📂 各文件夹详细说明

### 01_核心ETL程序/
**功能**: 存放主要的ETL数据处理程序
**文件类型**: Python脚本文件
**重要文件**:
- `etl_dataclean_mes_batch_report.py` - MES批次报工数据清洗主程序
- `etl_dataclean_sap_routing.py` - SAP工艺路线数据清洗
- `etl_dataclean_sfc_batch_report.py` - SFC批次报工数据清洗
- `etl_utils.py` - ETL通用工具函数
- `etl_validate_sa_results.py` - SA指标结果验证
- `generate_calendar.py` - 工作日历生成程序

### 02_测试验证脚本/
**功能**: 存放各类测试和验证脚本
**文件类型**: Python测试脚本
**重要文件**:
- `test_operation_cleaning.py` - 工序清洗功能测试
- `test_*.py` - 各类功能测试脚本
- `verify_*.py` - 各类验证脚本
- `debug_*.py` - 调试脚本

### 03_配置文件/
**功能**: 存放配置文件和依赖管理
**文件类型**: 配置文件、依赖文件
**重要文件**:
- `config/` - 配置文件目录
  - `config_mes_batch_report.yaml` - MES批次报工配置
  - `config_sap_routing.yaml` - SAP工艺路线配置
  - `config_sfc_batch_report.yaml` - SFC批次报工配置
- `requirements.txt` - Python依赖包列表

### 04_报告文档/
**功能**: 存放各类报告、文档和说明
**文件类型**: Markdown文档
**重要文件**:
- `README.md` - 项目总体说明
- `MES_Operation_Description_清洗合并分析报告.md` - 工序清洗分析报告
- `MES_Operation_Cleaning_Implementation_Report.md` - 工序清洗实施报告
- `*_REPORT.md` - 各类修复和优化报告
- `*_逻辑梳理.md` - 各类计算逻辑说明文档

### 05_数据文件/
**功能**: 存放数据文件和处理结果
**文件类型**: CSV、Parquet等数据文件
**重要文件**:
- `operation_cleaning_result.csv` - 工序清洗结果样本
- `operation_mapping.csv` - 工序清洗映射表
- `*.parquet` - ETL处理后的数据文件

### 06_日志文件/
**功能**: 存放程序运行日志
**文件类型**: 日志文件
**重要文件**:
- `logs/` - 日志目录
  - `etl_*.log` - ETL运行日志
  - `error_*.log` - 错误日志

### 07_工具脚本/
**功能**: 存放辅助工具和批处理脚本
**文件类型**: 批处理文件、工具脚本
**重要文件**:
- `run_all_etl.bat` - 运行所有ETL脚本
- `run_etl.bat` - 运行ETL脚本

### 08_临时文件/
**功能**: 存放临时文件和缓存
**文件类型**: 临时文件、缓存文件
**重要文件**:
- `__pycache__/` - Python缓存文件
- 其他临时生成的文件

## 🚀 使用指南

### 运行ETL程序
```bash
# 进入核心程序目录
cd 01_核心ETL程序/

# 运行MES数据清洗
python etl_dataclean_mes_batch_report.py

# 运行SAP数据清洗
python etl_dataclean_sap_routing.py

# 运行SFC数据清洗
python etl_dataclean_sfc_batch_report.py
```

### 运行测试验证
```bash
# 进入测试脚本目录
cd 02_测试验证脚本/

# 运行工序清洗测试
python test_operation_cleaning.py

# 运行验证脚本
python verify_operation_cleaning.py
```

### 使用工具脚本
```bash
# 进入工具脚本目录
cd 07_工具脚本/

# 运行所有ETL
run_all_etl.bat

# 运行单个ETL
run_etl.bat
```

## 📋 文件管理规范

### 新增文件规范
1. **ETL程序**: 放入 `01_核心ETL程序/`
2. **测试脚本**: 放入 `02_测试验证脚本/`
3. **配置文件**: 放入 `03_配置文件/`
4. **报告文档**: 放入 `04_报告文档/`
5. **数据结果**: 放入 `05_数据文件/`
6. **日志文件**: 自动放入 `06_日志文件/`
7. **工具脚本**: 放入 `07_工具脚本/`
8. **临时文件**: 放入 `08_临时文件/`

### 命名规范
- **ETL程序**: `etl_功能描述.py`
- **测试脚本**: `test_功能描述.py`
- **验证脚本**: `verify_功能描述.py`
- **调试脚本**: `debug_问题描述.py`
- **报告文档**: `功能描述_报告类型.md`
- **配置文件**: `config_模块名称.yaml`

### 版本管理
- 重要修改前请备份原文件
- 报告文档按日期版本管理
- 配置文件修改需要测试验证

## 🔄 维护建议

### 定期清理
- 每月清理 `08_临时文件/` 中的过期文件
- 每季度整理 `06_日志文件/` 中的历史日志
- 及时归档 `05_数据文件/` 中的大数据文件

### 备份策略
- 配置文件需要版本控制
- 重要报告文档需要备份
- ETL程序修改前需要备份

---

**创建时间**: 2025-11-21  
**维护人员**: 请根据实际情况更新此文档  
**更新频率**: 每次重大结构调整后更新
